!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var o in r)("object"==typeof exports?exports:e)[o]=r[o]}}(global,function(){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.w={},r(r.s=2)}([function(e,t){const r=[1,2,3,4,5,6,7,8,9];e.exports=class{constructor(e,t,o){this.idx=e,this.srow=t,this.erow=t+2,this.scol=o,this.ecol=o+2,this.availNumbers=new Set(r),this.cells=new Set}}},function(e,t,r){const o=r(0);function n(e,t){let r=Math.round(Math.random()*t);return r=Math.max(r,e),Math.min(r,t)}function s(e,t,r){return e.find(e=>e.srow<=t&&e.erow>=t&&e.scol<=r&&e.ecol>=r)}function a(e,t,r){return e.board[r].includes(t)}function l(e,t,r){let o,n=!1;for(o=0;o<e.board.length&&!n;o++)n=e.board[o][r]===t;return n}function u(e,t){let r,o=t||Array.from(e.availNumbers);return{number:o[r=Math.round(Math.random()*(o.length-1))],index:r,list:o}}function d(e,t,r,o){let n,i=u(t),s=0,d=!1,c=!1;do{if(n=i.list,d=a(e,s=i.number,r),c=l(e,s,o),!d&&!c)break;n.splice(i.index,1),0===n.length&&(s=0),i=u(t,n)}while(n.length>0);return n.length>0&&(s=i.number),s}function c(e,t,r,o){let n,a,l=e.board,u=h.get(e).clusters;for(a=r;a>=o&&a>=0;a--)(n=s(u,t,a))?(0!==l[t][a]&&n.availNumbers.add(l[t][a]),l[t][a]=0):console.error(`ERROR: Backtracking, Couldn't Find pool for row(${i}) col(${a}) `);return a}let h=new WeakMap;e.exports=class{constructor(){let e,t;for(this.signature=null,this.board=[],e=0;e<9;e++)(t=new Array(9)).fill(0,0,9),this.board.push(t)}generate(){let e,t,r,n,i,a,l,u=4,f=0,g=[];for(l=0,e=0;e<this.board.length;e+=3)for(t=0;t<this.board[e].length;t+=3)g.push(new o(l,e,t)),l++;for(h.set(this,{clusters:g}),e=0;e<this.board.length;e++)for(t=0;t<this.board[e].length;t++)(r=s(g,e,t))?(n=d(this,r,e,t))>0?(this.board[e][t]=n,r.availNumbers.delete(n)):((i=`${e}-${t}`)===a?(u++,f++):(u=4,f=0),a=i,f>=5?(c(this,e,t-1,0),c(this,--e,8,0),t=-1):t=c(this,e,t-1,t-u)):console.error(`ERROR: Building board, Couldn't Find pool for row(${e}) col(${t}) `);return this.signature=Buffer.from(this.board.map(e=>e.join("")).join("")).toString("base64"),h.get(this).clusters.length=0,h.delete(this),this.board}getSheet(e){let t,r,o=JSON.parse(JSON.stringify(this.board));return 2===e?(t=6,r=9):1===e?(t=5,r=8):(t=3,r=7),o.forEach(function(e,t,r){let o,i,s=n(e,t);for(i=0;i<s;i++){do{o=n(0,8)}while(""===r[o]);r[o]=""}}.bind(this,t,r)),o}load(e){let t,r=Buffer.from(e,"base64").toString("ascii");if(!r||81!==r.length||!/^\d+$/i.test(r))throw"Invalid signature received...";t=r.match(/\d{9}/g),this.signature=e,this.board=t.map(e=>e.split("").map(Number))}prettyPrint(e){let t,r,o=e||this.board,n=" |  ";for(t=0;t<o.length;t++){for(r=0;r<o[t].length;r++)n+=`${o[t][r]||" "} `,0!==r&&(r+1)%3==0&&(n+=" |  ");n+="\n",t+1<o.length&&(0!==t&&(t+1)%3==0&&(n+="\n"),n+=" |  ")}console.log(n)}}},function(e,t,r){const o=r(1);console.log("Sudoku Generator Generated..."),e.exports={SudokuGenerator:new class{constructor(){this.generatedBoards=[]}generate(e){let t,r;for(Number(e),this.generatedBoards.length=0,t=0;t<e;t++)(r=new o).generate(),this.generatedBoards.push(r),console.log(`Generation @ ${(t/e*100).toFixed(2)} %`);return console.log("Generation @ 100 %"),this.generatedBoards}loadBoard(e){let t=new o;try{t.load(e),this.generatedBoards.find(e=>e.signature===t.signature)||this.generatedBoards.push(t)}catch(r){t=null,console.error("Error loading board with signature: ",e)}return t}}}}])});
